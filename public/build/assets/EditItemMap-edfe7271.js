import{J}from"./ActionMessage-86d2cefe.js";import{J as b}from"./ActionSection-96b34f83.js";import{J as I}from"./Button-c7c1269f.js";import{J as N}from"./ConfirmationModal-fc660ee4.js";import{J as E}from"./DangerButton-cae1aa00.js";import{J as A}from"./DialogModal-9ccdd4ea.js";import{J as v}from"./FormSection-fba54185.js";import{J as S}from"./Input-fd3ff2e6.js";import{J as V}from"./Checkbox-f9be08cc.js";import{J as M}from"./InputError-147afb17.js";import{J as w}from"./Label-9c529059.js";import{J as j}from"./SecondaryButton-0e4a566a.js";import{J as D}from"./SectionBorder-790e6c81.js";import{J as T}from"./ValidationErrors-62fdbd60.js";import{M as y}from"./vue3-multiselect.umd.min-18b68693.js";import{r as i,o as k,b as x,w as r,g as f,t as u,e as m,d as a,k as B,n as U}from"./app-a7c937a1.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import"./SectionTitle-57156eee.js";import"./Modal-d0d07394.js";const W={components:{JetActionMessage:J,JetActionSection:b,JetButton:I,JetConfirmationModal:N,JetDangerButton:E,JetDialogModal:A,JetFormSection:v,JetInput:S,JetCheckbox:V,JetInputError:M,JetLabel:w,JetSecondaryButton:j,JetSectionBorder:D,JetValidationErrors:T,Multiselect:y},props:{item_map:{Type:Object,default:null}},data(){return{errors:[],form:this.$inertia.form({MSCode:"",ETACode:"",ItemNameA:"",ItemNameE:"",Val_Diff:0}),eta_item:null,items:[],showDialog:!1}},methods:{ShowDialog(){this.item_map!==null&&(this.form.MSCode=this.item_map.MSCode,this.form.ETACode=this.item_map.ETACode,this.form.ItemNameA=this.item_map.ItemNameA,this.form.ItemNameE=this.item_map.ItemNameE,this.form.Val_Diff=this.item_map.Val_Diff),this.showDialog=!0,this.$nextTick(()=>{this.item_map!=null&&this.items!=null&&(this.eta_item=this.items.find(e=>e.itemCode===this.form.ETACode),this.updateETAItem())})},CancelDlg(){this.showDialog=!1},submit(){axios.post(route("ms.items.map.update"),this.form).then(e=>{this.$store.dispatch("setSuccessFlashMessage",!0),this.processing=!1,this.form.reset(),this.form.processing=!1,this.showDialog=!1,setTimeout(()=>{window.location.reload()},500)}).catch(e=>{this.form.processing=!1,this.$page.props.errors=e.response.data.errors,this.errors=e.response.data.errors})},nameWithCode({codeNamePrimaryLang:e,codeNameSecondaryLang:t,itemCode:d}){return this.$page.props.locale=="ar"?d+" - "+t:d+" - "+e},updateETAItem(){this.eta_item&&((this.form.ItemNameA==null||this.form.ItemNameA.length<3)&&(this.form.ItemNameA=this.eta_item.codeNameSecondaryLang),(this.form.ItemNameE==null||this.form.ItemNameE.length<3)&&(this.form.ItemNameE=this.eta_item.codeNamePrimaryLang),this.form.ETACode=this.eta_item.itemCode)}},created(){axios.get(route("json.eta.items")).then(e=>{this.items=e.data,this.item_map!=null&&(this.eta_item=this.items.find(t=>t.itemCode===this.form.ETACode),this.updateETAItem())}).catch(e=>{})}},F={class:"grid grid-cols-2 gap-4"},P={class:"col-span-2"},z={class:"col-span-2"},O={class:"col-span-1"},q={class:"col-span-1"},G={class:"flex items-center justify-end"};function H(e,t,d,K,o,l){const c=i("jet-validation-errors"),n=i("jet-label"),p=i("jet-input"),h=i("multiselect"),_=i("jet-secondary-button"),g=i("jet-button"),C=i("jet-dialog-modal");return k(),x(C,{show:o.showDialog,maxWidth:"3xl",onClose:t[6]||(t[6]=s=>o.showDialog=!1)},{title:r(()=>[f(u(e.__("Item Map")),1)]),content:r(()=>[m(c,{class:"mb-4"}),a("form",{onSubmit:t[4]||(t[4]=B((...s)=>l.submit&&l.submit(...s),["prevent"]))},[a("div",F,[a("div",P,[m(n,{value:e.__("MSCode")},null,8,["value"]),m(p,{id:"MSCode",type:"text",class:"mt-1 block w-full",modelValue:o.form.MSCode,"onUpdate:modelValue":t[0]||(t[0]=s=>o.form.MSCode=s),disabled:!0},null,8,["modelValue"])]),a("div",z,[m(n,{value:e.__("ETACode")},null,8,["value"]),m(h,{modelValue:o.eta_item,"onUpdate:modelValue":[t[1]||(t[1]=s=>o.eta_item=s),l.updateETAItem],options:o.items,"custom-label":l.nameWithCode,label:"codeNamePrimaryLang","track-by":"itemCode",placeholder:e.__("Select item")},null,8,["modelValue","options","custom-label","onUpdate:modelValue","placeholder"])]),a("div",O,[m(n,{value:e.__("Name Arabic")},null,8,["value"]),m(p,{id:"MSCode",type:"text",class:"mt-1 block w-full",modelValue:o.form.ItemNameA,"onUpdate:modelValue":t[2]||(t[2]=s=>o.form.ItemNameA=s)},null,8,["modelValue"])]),a("div",q,[m(n,{value:e.__("Name English")},null,8,["value"]),m(p,{id:"MSCode",type:"text",class:"mt-1 block w-full",modelValue:o.form.ItemNameE,"onUpdate:modelValue":t[3]||(t[3]=s=>o.form.ItemNameE=s)},null,8,["modelValue"])])])],32)]),footer:r(()=>[a("div",G,[m(_,{onClick:t[5]||(t[5]=s=>l.CancelDlg())},{default:r(()=>[f(u(e.__("Cancel")),1)]),_:1}),m(g,{class:U(["ms-2",{"opacity-25":o.form.processing}]),onClick:l.submit,disabled:o.form.processing},{default:r(()=>[f(u(e.__("Save")),1)]),_:1},8,["onClick","class","disabled"])])]),_:1},8,["show"])}const ue=L(W,[["render",H]]);export{ue as default};
