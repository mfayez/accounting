import{J as g}from"./ActionMessage-86d2cefe.js";import{J}from"./ActionSection-96b34f83.js";import{J as _}from"./Button-c7c1269f.js";import{J as b}from"./ConfirmationModal-fc660ee4.js";import{J as y}from"./DangerButton-cae1aa00.js";import{J as C}from"./DialogModal-9ccdd4ea.js";import{J as F}from"./FormSection-fba54185.js";import{J as j}from"./Input-fd3ff2e6.js";import{J as A}from"./Checkbox-f9be08cc.js";import{J as D}from"./InputError-147afb17.js";import{J as I}from"./Label-9c529059.js";import{J as S}from"./SecondaryButton-0e4a566a.js";import{J as B}from"./SectionBorder-790e6c81.js";import{M as V}from"./vue3-multiselect.umd.min-18b68693.js";/* empty css                                                                  */import{_ as x}from"./_plugin-vue_export-helper-c27b6911.js";import{r as n,o as U,b as M,w as a,g as r,t as p,d as l,e as s}from"./app-a7c937a1.js";import"./SectionTitle-57156eee.js";import"./Modal-d0d07394.js";const w={components:{JetActionMessage:g,JetActionSection:J,JetButton:_,JetConfirmationModal:b,JetDangerButton:y,JetDialogModal:C,JetFormSection:F,JetInput:j,JetCheckbox:A,JetInputError:D,JetLabel:I,JetSecondaryButton:S,JetSectionBorder:B,Multiselect:V},data(){return{file:["",""],uploadingInvoices:!1,processing:!1,data:[],branches:[],issuer:[],taxpayerActivityCode:[],activities:[]}},methods:{ShowDialog(){this.uploadingInvoices=!0,axios.get(route("json.branches")).then(e=>{this.branches=e.data,this.form.issuer=this.branches[0]}).catch(e=>{}),axios.get("/json/ActivityCodes.json").then(e=>{this.activities=e.data,this.form.taxpayerActivityCode=this.activities[0]}).catch(e=>{})},CancleDlg(){this.uploadingInvoices=!1},handleFileUpload(e,t){this.file[t]=e.target.files[0]},submitFile(){let e=new FormData;e.append("file1",this.file[0]),e.append("file2",this.file[1]),e.append("issuer",this.issuer.Id),e.append("taxpayerActivityCode",this.taxpayerActivityCode.code),this.processing=!0;let t=this;axios.post(route("ms.invoices.upload"),e,{headers:{"Content-Type":"multipart/form-data"}}).then(m=>{t.processing=!1,t.$refs.inputFile.value=null,this.data=m.data}).catch(function(){t.processing=!1,t.$refs.inputFile.value=null,console.log("FAILURE!!")})}}},k={class:"grid grid-cols-1 gap-4"};function N(e,t,m,E,i,u){const d=n("jet-label"),c=n("multiselect"),f=n("jet-secondary-button"),v=n("jet-button"),h=n("jet-dialog-modal");return U(),M(h,{show:i.uploadingInvoices,onClose:t[6]||(t[6]=o=>i.uploadingInvoices=!1)},{title:a(()=>[r(p(e.__("Uploading invoices from MOBIS")),1)]),content:a(()=>[l("div",k,[l("div",null,[s(d,{value:e.__("Branch")},null,8,["value"]),s(c,{modelValue:i.issuer,"onUpdate:modelValue":t[0]||(t[0]=o=>i.issuer=o),label:"name",options:i.branches,placeholder:"Select branch"},null,8,["modelValue","options"])]),l("div",null,[s(d,{value:e.__("Branch Activity")},null,8,["value"]),s(c,{modelValue:i.taxpayerActivityCode,"onUpdate:modelValue":t[1]||(t[1]=o=>i.taxpayerActivityCode=o),label:"Desc_ar",options:i.activities,placeholder:"Select activity"},null,8,["modelValue","options"])]),l("div",null,[l("label",null,[r(p(e.__("Choose Summary File"))+" ",1),l("input",{type:"file",onChange:t[2]||(t[2]=o=>u.handleFileUpload(o,0)),ref:"inputFile1"},null,544)])]),l("div",null,[l("label",null,[r(p(e.__("Choose Details File"))+" ",1),l("input",{type:"file",onChange:t[3]||(t[3]=o=>u.handleFileUpload(o,1)),ref:"inputFile2"},null,544)])])])]),footer:a(()=>[s(f,{onClick:t[4]||(t[4]=o=>u.CancleDlg())},{default:a(()=>[r(p(e.__("Cancel")),1)]),_:1}),s(v,{class:"ms-2",onClick:t[5]||(t[5]=o=>u.submitFile()),disabled:i.processing},{default:a(()=>[r(p(e.__("Save")),1)]),_:1},8,["disabled"])]),_:1},8,["show"])}const ie=x(w,[["render",N]]);export{ie as default};
