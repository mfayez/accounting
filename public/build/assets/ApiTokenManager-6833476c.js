import{J as D}from"./ActionMessage-86d2cefe.js";import{J as B}from"./ActionSection-96b34f83.js";import{J as I}from"./Button-c7c1269f.js";import{J as V}from"./ConfirmationModal-fc660ee4.js";import{J as M}from"./DangerButton-cae1aa00.js";import{J as N}from"./DialogModal-9ccdd4ea.js";import{J as L}from"./FormSection-fba54185.js";import{J as U}from"./Input-fd3ff2e6.js";import{J as E}from"./Checkbox-f9be08cc.js";import{J as z}from"./InputError-147afb17.js";import{J as Y}from"./Label-9c529059.js";import{J as q}from"./SecondaryButton-0e4a566a.js";import{J as G}from"./SectionBorder-790e6c81.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";import{r,o as a,f as m,e as s,w as o,g as i,d as l,F as f,h as T,t as k,i as _,n as h}from"./app-a7c937a1.js";import"./SectionTitle-57156eee.js";import"./Modal-d0d07394.js";const K={components:{JetActionMessage:D,JetActionSection:B,JetButton:I,JetConfirmationModal:V,JetDangerButton:M,JetDialogModal:N,JetFormSection:L,JetInput:U,JetCheckbox:E,JetInputError:z,JetLabel:Y,JetSecondaryButton:q,JetSectionBorder:G},props:["tokens","availablePermissions","defaultPermissions"],data(){return{createApiTokenForm:this.$inertia.form({name:"",permissions:this.defaultPermissions}),updateApiTokenForm:this.$inertia.form({permissions:[]}),deleteApiTokenForm:this.$inertia.form(),displayingToken:!1,managingPermissionsFor:null,apiTokenBeingDeleted:null}},methods:{createApiToken(){this.createApiTokenForm.post(route("api-tokens.store"),{preserveScroll:!0,onSuccess:()=>{this.displayingToken=!0,this.createApiTokenForm.reset()}})},manageApiTokenPermissions(c){this.updateApiTokenForm.permissions=c.abilities,this.managingPermissionsFor=c},updateApiToken(){this.updateApiTokenForm.put(route("api-tokens.update",this.managingPermissionsFor),{preserveScroll:!0,preserveState:!0,onSuccess:()=>this.managingPermissionsFor=null})},confirmApiTokenDeletion(c){this.apiTokenBeingDeleted=c},deleteApiToken(){this.deleteApiTokenForm.delete(route("api-tokens.destroy",this.apiTokenBeingDeleted),{preserveScroll:!0,preserveState:!0,onSuccess:()=>this.apiTokenBeingDeleted=null})}}},O={class:"col-span-6 sm:col-span-4"},Q={key:0,class:"col-span-6"},R={class:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4"},W={class:"flex items-center"},X={class:"ms-2 text-sm text-gray-600"},Z={key:0},$={class:"mt-10 sm:mt-0"},ee={class:"space-y-6"},oe={class:"flex items-center"},te={key:0,class:"text-sm text-gray-400"},se=["onClick"],ne=["onClick"],ie=l("div",null," Please copy your new API token. For your security, it won't be shown again. ",-1),re={key:0,class:"mt-4 bg-gray-100 px-4 py-2 rounded font-mono text-sm text-gray-500"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ae={class:"flex items-center"},me={class:"ms-2 text-sm text-gray-600"};function ce(c,n,p,pe,e,d){const y=r("jet-label"),F=r("jet-input"),j=r("jet-input-error"),A=r("jet-checkbox"),P=r("jet-action-message"),v=r("jet-button"),C=r("jet-form-section"),J=r("jet-section-border"),x=r("jet-action-section"),g=r("jet-secondary-button"),b=r("jet-dialog-modal"),S=r("jet-danger-button"),w=r("jet-confirmation-modal");return a(),m("div",null,[s(C,{onSubmitted:d.createApiToken},{title:o(()=>[i(" Create API Token ")]),description:o(()=>[i(" API tokens allow third-party services to authenticate with our application on your behalf. ")]),form:o(()=>[l("div",O,[s(y,{for:"name",value:"Name"}),s(F,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:e.createApiTokenForm.name,"onUpdate:modelValue":n[0]||(n[0]=t=>e.createApiTokenForm.name=t),autofocus:""},null,8,["modelValue"]),s(j,{message:e.createApiTokenForm.errors.name,class:"mt-2"},null,8,["message"])]),p.availablePermissions.length>0?(a(),m("div",Q,[s(y,{for:"permissions",value:"Permissions"}),l("div",R,[(a(!0),m(f,null,T(p.availablePermissions,t=>(a(),m("div",{key:t},[l("label",W,[s(A,{value:t,checked:e.createApiTokenForm.permissions,"onUpdate:checked":n[1]||(n[1]=u=>e.createApiTokenForm.permissions=u)},null,8,["value","checked"]),l("span",X,k(t),1)])]))),128))])])):_("",!0)]),actions:o(()=>[s(P,{on:e.createApiTokenForm.recentlySuccessful,class:"mr-3"},{default:o(()=>[i(" Created. ")]),_:1},8,["on"]),s(v,{class:h({"opacity-25":e.createApiTokenForm.processing}),disabled:e.createApiTokenForm.processing},{default:o(()=>[i(" Create ")]),_:1},8,["class","disabled"])]),_:1},8,["onSubmitted"]),p.tokens.length>0?(a(),m("div",Z,[s(J),l("div",$,[s(x,null,{title:o(()=>[i(" Manage API Tokens ")]),description:o(()=>[i(" You may delete any of your existing tokens if they are no longer needed. ")]),content:o(()=>[l("div",ee,[(a(!0),m(f,null,T(p.tokens,t=>(a(),m("div",{class:"flex items-center justify-between",key:t.id},[l("div",null,k(t.name),1),l("div",oe,[t.last_used_ago?(a(),m("div",te," Last used "+k(t.last_used_ago),1)):_("",!0),p.availablePermissions.length>0?(a(),m("button",{key:1,class:"cursor-pointer ms-6 text-sm text-gray-400 underline",onClick:u=>d.manageApiTokenPermissions(t)}," Permissions ",8,se)):_("",!0),l("button",{class:"cursor-pointer ms-6 text-sm text-red-500",onClick:u=>d.confirmApiTokenDeletion(t)}," Delete ",8,ne)])]))),128))])]),_:1})])])):_("",!0),s(b,{show:e.displayingToken,onClose:n[3]||(n[3]=t=>e.displayingToken=!1)},{title:o(()=>[i(" API Token ")]),content:o(()=>[ie,c.$page.props.jetstream.flash.token?(a(),m("div",re,k(c.$page.props.jetstream.flash.token),1)):_("",!0)]),footer:o(()=>[s(g,{onClick:n[2]||(n[2]=t=>e.displayingToken=!1)},{default:o(()=>[i(" Close ")]),_:1})]),_:1},8,["show"]),s(b,{show:e.managingPermissionsFor,onClose:n[6]||(n[6]=t=>e.managingPermissionsFor=null)},{title:o(()=>[i(" API Token Permissions ")]),content:o(()=>[l("div",le,[(a(!0),m(f,null,T(p.availablePermissions,t=>(a(),m("div",{key:t},[l("label",ae,[s(A,{value:t,checked:e.updateApiTokenForm.permissions,"onUpdate:checked":n[4]||(n[4]=u=>e.updateApiTokenForm.permissions=u)},null,8,["value","checked"]),l("span",me,k(t),1)])]))),128))])]),footer:o(()=>[s(g,{onClick:n[5]||(n[5]=t=>e.managingPermissionsFor=null)},{default:o(()=>[i(" Cancel ")]),_:1}),s(v,{class:h(["ms-2",{"opacity-25":e.updateApiTokenForm.processing}]),onClick:d.updateApiToken,disabled:e.updateApiTokenForm.processing},{default:o(()=>[i(" Save ")]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"]),s(w,{show:e.apiTokenBeingDeleted,onClose:n[8]||(n[8]=t=>e.apiTokenBeingDeleted=null)},{title:o(()=>[i(" Delete API Token ")]),content:o(()=>[i(" Are you sure you would like to delete this API token? ")]),footer:o(()=>[s(g,{onClick:n[7]||(n[7]=t=>e.apiTokenBeingDeleted=null)},{default:o(()=>[i(" Cancel ")]),_:1}),s(S,{class:h(["ms-2",{"opacity-25":e.deleteApiTokenForm.processing}]),onClick:d.deleteApiToken,disabled:e.deleteApiTokenForm.processing},{default:o(()=>[i(" Delete ")]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"])])}const xe=H(K,[["render",ce]]);export{xe as default};
