import{J as w}from"./ActionMessage-86d2cefe.js";import{J as D}from"./ActionSection-96b34f83.js";import{J as C}from"./Button-c7c1269f.js";import{J as S}from"./SecondaryButton-0e4a566a.js";import{J as T}from"./DangerButton-cae1aa00.js";import{J as F}from"./ConfirmationModal-fc660ee4.js";import{J as I}from"./DialogModal-9ccdd4ea.js";import{J as x}from"./FormSection-fba54185.js";import{J as M}from"./Input-fd3ff2e6.js";import{J as B}from"./Checkbox-f9be08cc.js";import{J as V}from"./InputError-147afb17.js";import{J as k}from"./Label-9c529059.js";import{J as A}from"./SectionBorder-790e6c81.js";import{J as N}from"./ValidationErrors-62fdbd60.js";import{T as j}from"./TextField-0eb10881.js";import{M as E}from"./vue3-multiselect.umd.min-18b68693.js";import{a as u,r as p,o as _,b as P,w as d,g,t as o,d as s,f as h,h as O,F as v,n,e as f,j as q,v as z}from"./app-a7c937a1.js";import{s as G}from"./sweetalert.min-cf20c789.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import"./SectionTitle-57156eee.js";import"./Modal-d0d07394.js";const Q={components:{TextField:j,Multiselect:E,JetActionMessage:w,JetActionSection:D,JetButton:C,JetConfirmationModal:F,JetDangerButton:T,JetDialogModal:I,JetFormSection:x,JetInput:M,JetCheckbox:B,JetInputError:V,JetLabel:k,JetSecondaryButton:S,JetSectionBorder:A,JetValidationErrors:N},props:["modelValue"],data(){return{item:this.modelValue,count:1,units:[],items:[],taxTypes:[],taxSubtypes:[],taxSubtypes1:[],taxType:null,taxSubtype:null,showDlg:!1}},methods:{ShowDialog(){this.item=JSON.parse(JSON.stringify(this.modelValue)),this.showDlg=!0},CancelDlg(){this.showDlg=!1},getDate(t){return new Date(t).toLocaleDateString()},getTaxlines(t){for(var e=0,l=0;l<t.taxable_items.length;l++){var c=t.taxable_items[l];e=e+parseFloat(c.amount)}return e},getTotalTax(){for(var t=0,e=0;e<this.item.invoice_lines.length;e++)for(var l=this.item.invoice_lines[e],c=0;c<l.taxable_items.length;c++){var a=l.taxable_items[c];t=t+parseFloat(a.amount)}return t},ApproveItem(){u.post(route("eta.invoices.approve"),{Id:this.item.Id}).then(t=>{alert(t.data)}).catch(t=>{alert(t.response.data)})},CopyItem(){u.post(route("invoices.copy"),{Id:this.item.Id}).then(t=>{G({title:"Invoice Was Copied",icon:"success"}),setTimeout(()=>{window.location.reload()},200)}).catch(t=>{console.error(t)})}},created:function(){}},U={class:"grid grid-cols-10 gap-0 mt-2"},W={class:"col-span-5"},H={class:"col-span-5"},K={class:"col-span-5"},R={class:"grid grid-cols-10 gap-0 mt-2"},X={class:"bg-gray-400 col-span-3"},Y={class:"bg-gray-400 col-span-2"},Z={class:"bg-gray-400 col-span-1"},$={class:"bg-gray-400 col-span-1"},tt={class:"bg-gray-400 col-span-1"},ot={class:"bg-gray-400 col-span-1"},st={class:"bg-gray-400 col-span-1"},et={class:"bg-gray-400 col-span-5"},at=s("div",{class:"bg-gray-400 col-span-1"},"****",-1),rt=s("div",{class:"bg-gray-400 col-span-1"},"****",-1),it={class:"bg-gray-400 col-span-1"},lt={class:"bg-gray-400 col-span-1"},nt={class:"bg-gray-400 col-span-1"},ct={class:"flex items-center justify-between mt-4"};function mt(t,e,l,c,a,m){const y=p("jet-secondary-button"),b=p("jet-button"),J=p("jet-dialog-modal");return _(),P(J,{show:a.showDlg,"max-width":"5xl",onClose:e[2]||(e[2]=r=>a.showDlg=!1)},{title:d(()=>[g(o(t.__("Invoice Preview")),1)]),content:d(()=>[s("div",U,[s("div",W,o(t.__("Branch"))+": "+o(a.item.issuer.name),1),s("div",H,o(t.__("Customer"))+": "+o(a.item.receiver.name),1),s("div",K,o(t.__("Date"))+": "+o(m.getDate(a.item.dateTimeIssued)),1)]),s("div",R,[s("div",X,o(t.__("Item")),1),s("div",Y,o(t.__("Code")),1),s("div",Z,o(t.__("Quantity")),1),s("div",$,o(t.__("Unit Price")),1),s("div",tt,o(t.__("Sales")),1),s("div",ot,o(t.__("Tax")),1),s("div",st,o(t.__("Total")),1),(_(!0),h(v,null,O(a.item.invoice_lines,(r,i)=>(_(),h(v,{key:i},[s("div",{class:n(["col-span-3",{"bg-gray-200":i%2==1}])},o(r.description),3),s("div",{class:n(["col-span-2",{"bg-gray-200":i%2==1}])},o(r.itemCode),3),s("div",{class:n(["col-span-1",{"bg-gray-200":i%2==1}])},o(r.quantity.toFixed(2)),3),s("div",{class:n(["col-span-1",{"bg-gray-200":i%2==1}])},o((Math.round(100*r.unit_value.amountEGP)/100).toFixed(2)),3),s("div",{class:n(["col-span-1",{"bg-gray-200":i%2==1}])},o((Math.round(100*r.salesTotal)/100).toFixed(2)),3),s("div",{class:n(["col-span-1",{"bg-gray-200":i%2==1}])},o(m.getTaxlines(r).toFixed(2)),3),s("div",{class:n(["col-span-1",{"bg-gray-200":i%2==1}])},o((Math.round(100*r.total)/100).toFixed(2)),3)],64))),128)),s("div",et,o(t.__("Summary")),1),at,rt,s("div",it,o((Math.round(100*a.item.totalSalesAmount)/100).toFixed(2)),1),s("div",lt,o(m.getTotalTax().toFixed(2)),1),s("div",nt,o((Math.round(100*a.item.totalAmount)/100).toFixed(2)),1)])]),footer:d(()=>[s("div",ct,[f(y,{onClick:e[0]||(e[0]=r=>m.CancelDlg())},{default:d(()=>[g(o(t.__("Close")),1)]),_:1}),q(s("div",null,[f(b,{class:"ms-2",onClick:e[1]||(e[1]=r=>m.ApproveItem())},{default:d(()=>[g(o(t.__("Approve")),1)]),_:1})],512),[[z,a.item.status!="Valid"]])])]),_:1},8,["show"])}const Vt=L(Q,[["render",mt]]);export{Vt as default};
