import{J as V}from"./ActionMessage-86d2cefe.js";import{J as j}from"./ActionSection-96b34f83.js";import{J as k}from"./Button-c7c1269f.js";import{J as y}from"./ConfirmationModal-fc660ee4.js";import{J as S}from"./DangerButton-cae1aa00.js";import{J as C}from"./DialogModal-9ccdd4ea.js";import{J as D}from"./FormSection-fba54185.js";import{J as B}from"./Input-fd3ff2e6.js";import{J as E}from"./Checkbox-f9be08cc.js";import{J as I}from"./InputError-147afb17.js";import{J as M}from"./Label-9c529059.js";import{J as N}from"./SecondaryButton-0e4a566a.js";import{J as A}from"./SectionBorder-790e6c81.js";import{J as T}from"./ValidationErrors-62fdbd60.js";import{M as q}from"./vue3-multiselect.umd.min-18b68693.js";import{r as a,o as d,b as _,w as m,g as h,t as l,e as i,f as v,d as t,j as z,Q as R,k as F,n as L,i as O}from"./app-a7c937a1.js";/* empty css                                                                  */import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import"./SectionTitle-57156eee.js";import"./Modal-d0d07394.js";const Q={components:{JetActionMessage:V,JetActionSection:j,JetButton:k,JetConfirmationModal:y,JetDangerButton:S,JetDialogModal:C,JetFormSection:D,JetInput:B,JetCheckbox:E,JetInputError:I,JetLabel:M,JetSecondaryButton:N,JetSectionBorder:A,JetValidationErrors:T,Multiselect:q},props:{pUser:{Type:Object,default:null}},data(){return{branches:[],customers:[],issuers:[],errors:[],form:this.$inertia.form({name:"",email:"",password:"",issuers:[]}),showDialog:!1}},methods:{ShowDialog(){if(this.issuers=[],this.pUser!==null){this.form.name=this.pUser.name,this.form.email=this.pUser.email,this.form.current_team_id=this.pUser.current_team_id;for(var e=0;e<this.pUser.issuers.length;e++)this.issuers.push(this.branches.find(s=>s.Id===this.pUser.issuers[e].Id))}this.showDialog=!0},CancelAddUser(){this.showDialog=!1},SaveUser(){this.form.issuers=[];for(var e=0;e<this.issuers.length;e++)this.form.issuers.push(this.issuers[e].Id);axios.put(route("users.update",{user:this.pUser.id}),this.form).then(s=>{location.reload()}).catch(s=>{this.form.processing=!1,this.$page.props.errors=s.response.data.errors,this.errors=s.response.data.errors})},SaveNewUser(){this.form.issuers=[];for(var e=0;e<this.issuers.length;e++)this.form.issuers.push(this.issuers[e].Id);axios.post(route("users.store"),this.form).then(s=>{this.processing=!1,this.$nextTick(()=>this.$emit("dataUpdated")),this.form.reset(),this.form.processing=!1,this.showDialog=!1,location.reload()}).catch(s=>{this.form.processing=!1,this.$page.props.errors=s.response.data.errors,this.errors=s.response.data.errors})},submit(){this.pUser==null?this.SaveNewUser():this.SaveUser()}},created:function(){axios.get(route("json.branches")).then(s=>{if(this.branches=s.data,this.pUser)for(var u=0;u<this.pUser.issuers.length;u++)this.issuers.push(this.branches.find(c=>c.Id===this.pUser.issuers[u].Id))}).catch(s=>{})}},Y={class:"grid grid-cols-2 gap-4"},G={value:"1"},H={value:"2"},K={value:"3"},W={value:"4"},X={value:"5"},Z={class:"col-span-2"},x={key:1},$={class:"flex items-center justify-end mt-4"};function ee(e,s,u,c,o,p){const g=a("jet-validation-errors"),n=a("jet-label"),f=a("jet-input"),b=a("multiselect"),w=a("jet-secondary-button"),J=a("jet-button"),U=a("jet-dialog-modal");return d(),_(U,{show:o.showDialog,"max-width":"lg",onClose:s[7]||(s[7]=r=>o.showDialog=!1)},{title:m(()=>[h(l(e.__("User Information")),1)]),content:m(()=>[i(g,{class:"mb-4"}),e.$page.props.user.is_admin?(d(),v("form",{key:0,onSubmit:s[5]||(s[5]=F((...r)=>p.submit&&p.submit(...r),["prevent"]))},[t("div",Y,[t("div",null,[i(n,{for:"name",value:e.__("Name")},null,8,["value"]),i(f,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:o.form.name,"onUpdate:modelValue":s[0]||(s[0]=r=>o.form.name=r),required:"",autofocus:""},null,8,["modelValue"])]),t("div",null,[i(n,{for:"Email",value:e.__("Email")},null,8,["value"]),i(f,{id:"Email",type:"Email",class:"mt-1 block w-full",modelValue:o.form.email,"onUpdate:modelValue":s[1]||(s[1]=r=>o.form.email=r),required:""},null,8,["modelValue"])]),t("div",null,[i(n,{for:"password",value:e.__("Password")},null,8,["value"]),i(f,{id:"password",type:"password",class:"mt-1 block w-full",modelValue:o.form.password,"onUpdate:modelValue":s[2]||(s[2]=r=>o.form.password=r),required:""},null,8,["modelValue"])]),t("div",null,[i(n,{value:e.__("Role")},null,8,["value"]),z(t("select",{id:"type","onUpdate:modelValue":s[3]||(s[3]=r=>o.form.current_team_id=r),class:"mt-1 block w-full"},[t("option",G,l(e.__("Administrator")),1),t("option",H,l(e.__("Reviewer")),1),t("option",K,l(e.__("Data Entry")),1),t("option",W,l(e.__("ETA")),1),t("option",X,l(e.__("Viewer")),1)],512),[[R,o.form.current_team_id]])]),t("div",Z,[i(n,{value:e.__("Branches")},null,8,["value"]),i(b,{modelValue:o.issuers,"onUpdate:modelValue":s[4]||(s[4]=r=>o.issuers=r),options:o.branches,label:"name",placeholder:e.__("Select Branches"),multiple:!0},null,8,["modelValue","options","placeholder"])])])],32)):(d(),v("div",x,l(e.__("You are not authorized to add/edit users")),1))]),footer:m(()=>[t("div",$,[i(w,{onClick:s[6]||(s[6]=r=>p.CancelAddUser())},{default:m(()=>[h(l(e.__("Cancel")),1)]),_:1}),e.$page.props.user.is_admin?(d(),_(J,{key:0,class:L(["ms-2",{"opacity-25":o.form.processing}]),onClick:p.submit,disabled:o.form.processing},{default:m(()=>[h(l(e.__("Save")),1)]),_:1},8,["onClick","class","disabled"])):O("",!0)])]),_:1},8,["show"])}const Je=P(Q,[["render",ee]]);export{Je as default};
